# **Readme**

## **Задание 2.**

### **Тест кейсы.**


#### **Счетчики блока «Ваш экологический вклад»**

URL: <https://www.avito.ru/avito-care/eco-impact>

Разработал: Гончаров Даниил Игоревич, <goncharov.daniil.98@mail.ru>


#### Порядок действий для работы с автотестами:

1.  Запустить файл “test_avito.py”, используя приложение PyCharm.

2.  Нажать на кнопку «Run» и дождаться выполнения тестов. В результате
    работы программы будет отмечено, что 100% тестов пройдено успешно. В
    папке “output” появятся скриншоты, имеющие названия, идентичные
    названиям тест кейсов, к которым они относятся. При возникновении
    ошибок закройте программу и вернитесь к п. 1.

3.  Закрыть файл “test_avito.py”

4.  Открыть файл “design.png”, находящийся в корневом каталоге проекта. На
    данном изображении содержится макет дизайна сайта. Макет был получен
    из задания.

5.  Открыть папку “output” и находящиеся в ней скриншоты.

6.  Открыть файл “TESTCASES.md”.

7.  Провести согласно тест кейсам тестирование скриншотов, содержащихся
    в папке “output”, и сравнить их с изображением макета “design.png”.


#### Информация о структуре тест-кейсов.

Рассмотрим значение каждого столбца тест кейсов:

1.  **ID** – идентификационный номер тест кейса.

Имеет структуру:

Number.Counter_name.Browser_name

где:

Number – порядковый номер тест кейса.

Counter_name – название счетчика, тестируемого в этом тест кейсе.
Названия счетчиков приведены на английском;

Browser_name – название браузера, в котором проводится тестирование.

Такая структура ID была принята для наглядности и удобства ориентирования в тест кейсах.

2.  **Title** – описание тест кейса. Содержит краткую информацию о сути
    тест кейса.

3.  **Pre-conditions** – предварительные условия тестирования. Указан
    тип браузера, пройдена ли авторизация на сайте и пройден ли автотест.

4.  **Instruction** – краткая инструкция, описывающая порядок действий
    при прохождении тест кейса.

5.  **Expected result** – ожидаемый результат прохождения тест кейса.

6.  **Test data** – тестовые данные, необходимые для прохождения тест
    кейса. Указывают на название скриншота и макета, которые нужно
    открыть. Скриншоты расположены в папке “output”, макет – в
    корневом каталоге проекта.

#### **Информация о структуре автотеста:**

Автотесты написаны на связке «Python+Pytest+Playwright».

Для работы программа использует декоратор @pytest.mark.parametrize,
который передает параметры xpath и filename для каждого счетчика.
Параметр xpath указывает путь к счетчику, а filename – указывает, как
назвать скриншот.

Тестирование проводится в браузере Chrome.

Функция test_take_screenshot устроена следующим образом:

1.  Сначала она запускает браузер

2.  Затем переходит по заданному url-адресу

3.  Далее находит нужный счетчики по заданному xpath

4.  Делает скриншоты счетчиков и сохраняет их в папку “output” под названиями,
    указанными в filename для соответствующих xpath.

5.  После тестирования браузер закрывается.

Код программы приведен в конце файла.


#### **Примечания.**

В задании было сказано, что скриншоты счетчиков нужно проверить «своими глазами», а «эталонные» скриншоты мы получаем в результате работы программы. Но как тестировщик сможет проверить шрифт и размер текста, не используя какие-то сторонние программы и инструменты? И как обеспечить воспроизводимость результатов тестирования?

Я принял фразу о проверке скриншотов «своими глазами» как предопределяющую и решил, что наиболее верным способом проведения тестирования будет сравнение полученных скриншотов с макетом, представленным в тестовом задании.

Хотя в задании и не говорится о проведении сравнения скриншотов именно с макетом, но макет в задании есть и его можно считать основным требованием к дизайну счетчиков, на соответствие которому мы их и проверяем. Поэтому макет был аккуратно вырезан из задания и сохранен под названием “design.png”.

Также хочу отметить, что я рассматривал и другие способы проведения сравнения скриншотов. Например, Playwright имеет достаточный функционал для проведения сравнения изображений. Однако применение программных методов сравнения скриншотов противоречило бы заданию.


#### **Код программы:**

import pytest

from playwright.sync_api import sync_playwright

@pytest.fixture(scope="module")

def browser():

with sync_playwright() as p:

browser = p.chromium.launch()

yield browser

browser.close()

@pytest.mark.parametrize("xpath, filename", \[

("//\*\[@id='app'\]/div/div\[3\]/div/div/div/div/div\[3\]/div/div\[2\]/div\[2\]",
"1.Co2.Chrome.png"),

("//\*\[@id='app'\]/div/div\[3\]/div/div/div/div/div\[3\]/div/div\[2\]/div\[4\]",
"15.Water.Chrome.png"),

("//\*\[@id='app'\]/div/div\[3\]/div/div/div/div/div\[3\]/div/div\[2\]/div\[6\]",
"30.Energy.Chrome.png")

\])

def test_take_screenshot(xpath, filename):

with sync_playwright() as p:

browser = p.chromium.launch()

page = browser.new_page()

page.goto("https://www.avito.ru/avito-care/eco-impact")

element = page.locator(xpath)

element.screenshot(path=f"output/{filename}")

browser.close()
